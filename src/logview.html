<html>
    <head>
        <script src="jquery.js"></script>
        <script src="jquery-ui.js"></script>
        <script src="mark.js"></script>
        <script src="jquery.mark.js"></script>
        <link rel="stylesheet" href="jquery-ui.css">
        <style>
            *
            {
                box-sizing: content-box;
            }

            body
            {
                padding: 0px;
                margin: 0px;
            }
            #container-log
            {
                padding: 0px;
                margin: 0px;
                width: 50%;
                height: 50%;
                background: blue;
            }
        </style>
        <script>
            class LogView
            {
                constructor(element, size, contentCallback)
                {
                    var self = this;
                    var i;

                    self.logsize      = size;
                    self.pageLineSize = 10;
                    self.lineHeight   = 3;
                    self.scroll       = 0;
                    self.contentCallback = contentCallback;
                    self.pageCount  = 6;
                    self.$ = jQuery; /* global jQuery */
                    self.element = self.$(element);
                    self.container = document.createElement("div");
                    self.container.style.display             = "grid";
                    self.container.style.gridTemplateColumns = "1fr auto";
                    self.container.style.gridTemplateRows    = "auto";
                    self.container.style.height    = "100%";
                    self.container.style.width     = "100%";
                    self.container.style.padding   = "0px";
                    self.container.style.margin    = "0px";

                    self.element.html();
                    self.element[0].append(self.container);

                    self.content = document.createElement("div");
                    self.content.style.background = "brown";
                    self.content.style.height     = "100%";

                    self.contentPages  = new Array();
                    var pageColors = ["blue","green","red","cyan","yellow","magenta"];

                    for (i=0; i<self.pageCount; i++)
                    {
                        self.contentPages[i] = document.createElement("div")
                        self.contentPages[i].style.position   = "absolute";
                        self.contentPages[i].style.background = pageColors[i%pageColors.length];
                        self.contentPages[i].style.height     = self.lineHeight*self.pageLineSize+"px";
                        self.contentPages[i].innerText  = "loading";
                        self.content.append(self.contentPages[i]);
                    }

                    self.container.append(self.content);

                    var scrollerContainer = document.createElement("div");
                    scrollerContainer.style.background = "green";
                    scrollerContainer.style.height     = "100%";
                    scrollerContainer.style.display    = "flex";
                    scrollerContainer.style.alignItems = "center";

                    self.scroller = document.createElement("div");
                    self.scroller.style.height        = "calc(100% - 20px)";
                    self.scroller.style.background    = "none";
                    self.scroller.style.border        = "0px";

                    scrollerContainer.append(self.scroller);
                    self.container.append(scrollerContainer);

                    self.createSlider();
                    
                    for(i=0; i<self.pageLineSize; i++)
                    {
                        self.contentCallback(i*self.pageSize, self.pageSize);
                    }
                }
                
                setSize(size)
                {
                    var self = this;
                    self.size = size;
                    self.createSlider();
                }

                createSlider()
                {
                    var self = this;
                    self.$(self.scroller).slider({
                        orientation: "vertical",
                        min: 0,
                        max: self.logsize,
                        value: self.logsize,
                        slide: function (event, ui)
                        {
                            var value = self.logsize-ui.value;
                            self.onSlide(value);
                        }
                    });
                }

                onSlide(value)
                {
                    var self = this;
                    self.scroll = value;
                    console.log("onSlide:", self.scroll);
                    self.updateDisplay();
                }
                
                updateDisplay()
                {
                    var self = this;
                    var i;
                    var pageIndex = Math.floor(self.scroll/self.pageLineSize)%self.pageCount;
                    var pageHeight = self.pageLineSize*self.lineHeight;

                    console.log("updateDisplay:",self.contentPages);
                    for (i=0; i<self.pageCount; i++)
                    {
                        var index = (self.pageCount-(i-pageIndex))%self.pageCount;
                        self.contentPages[i].style.top = index*pageHeight+"px";
                    }
                }
            }
        </script>
    </head>
    <body>
        <div id="container-log"></div>
        <script>
            logview = new LogView($("#container-log"), 1000, function(resultCallback){});
        </script>
    </body>
</html>